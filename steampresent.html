<!DOCTYPE html>
<html lang="ru" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Вам подарок в Steam</title>
    
    <!-- META TAGS ДЛЯ ТЕЛЕГРАМА -->
    <meta property="og:title" content="Вам подарок: Cult of the Lamb">
    <meta property="og:description" content="Пользователь IVANKITKAT отправил вам подарок в Steam. Нажмите, чтобы принять.">
    <meta property="og:image" content="https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/1313140/header.jpg">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Steam">
    <meta name="theme-color" content="#171a21">

    <style>
        /* Общие стили */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: "Motiva Sans", Arial, Helvetica, sans-serif;
        }

        body {
            background-color: #171a21;
            color: #c6d4df;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Экран 1: Стим */
        #steam-screen {
            width: 100%;
            max-width: 480px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: opacity 1s ease;
            overflow-y: auto; /* На случай маленьких экранов */
        }

        .user-block {
            display: flex;
            align-items: center;
            width: 100%;
            margin-bottom: 15px;
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 4px;
        }

        .avatar {
            width: 42px;
            height: 42px;
            background: linear-gradient(to bottom, #f3f3f3, #5a5a5a);
            border: 2px solid #57cbde;
            margin-right: 12px;
            border-radius: 2px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: #000;
            font-size: 20px;
        }

        .user-info h2 {
            font-size: 15px;
            color: #66c0f4;
            margin-bottom: 2px;
        }

        .user-info p {
            font-size: 12px;
            color: #8f98a0;
        }

        .gift-card {
            background-color: #1b2838;
            border: 1px solid #2a475e;
            width: 100%;
            padding: 15px;
            border-radius: 3px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        .game-img {
            width: 100%;
            height: auto;
            border-radius: 2px;
            margin-bottom: 15px;
            box-shadow: 0 0 5px #000;
        }

        .gift-title {
            font-size: 20px;
            color: #fff;
            margin-bottom: 8px;
        }

        .game-name {
            font-size: 18px; 
            color: #66c0f4; 
            margin-bottom: 10px;
        }

        .gift-desc {
            font-size: 13px;
            color: #acb2b8;
            line-height: 1.4;
            margin-bottom: 20px;
        }

        .btn {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding: 12px;
            text-align: center;
            border-radius: 2px;
            text-decoration: none;
            font-size: 16px;
            font-weight: normal;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            height: 48px; /* Фиксированная высота для спиннера */
        }

        .btn-green {
            background: linear-gradient( to bottom, #a4d007 5%, #536904 95%);
            color: #d2efa9;
            text-shadow: 1px 1px 0px rgba(0,0,0,0.3);
        }
        
        .btn-green:active {
             background: #536904;
        }

        .btn-blue {
            background: linear-gradient( to bottom, #47bfff 5%, #1a44c2 95%);
            color: white;
            margin-top: 15px;
        }

        /* Спиннер внутри кнопки */
        .btn-spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(210, 239, 169, 0.3);
            border-top: 3px solid #fff;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Экран 2: Темный диалог */
        #dark-screen {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            z-index: 20;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: left;
        }

        .dialogue-line {
            font-size: 18px;
            color: #ddd;
            margin-bottom: 15px;
            opacity: 0;
            width: 100%;
            max-width: 400px;
            transition: opacity 1s ease;
        }

        .dialogue-line.visible {
            opacity: 1;
        }

        .small-text {
            font-size: 13px;
            color: #888;
            margin-top: 30px;
            opacity: 0;
            text-align: center;
            transition: opacity 0.5s ease;
            max-width: 350px;
        }

        .btn-uvy {
            margin-top: 40px;
            background: #111;
            color: #444;
            border: 1px solid #333;
            opacity: 0;
            transition: opacity 1s ease;
        }

        /* Экран 3: Финал */
        #final-screen {
            display: none;
            width: 100%;
            max-width: 480px;
            padding: 20px;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            animation: fadeIn 1s;
        }

        .final-box {
            background-color: #1b2838;
            border: 1px solid #2a475e;
            padding: 25px;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        .final-text {
            font-size: 15px;
            color: #c6d4df;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .disclaimer {
            margin-top: 25px;
            font-size: 11px;
            color: #62666a;
            line-height: 1.3;
            border-top: 1px solid #2a475e;
            padding-top: 15px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

    </style>
</head>
<body>

    <!-- ЭКРАН 1: ФЕЙКОВЫЙ ПОДАРОК -->
    <div id="steam-screen">
        <div class="user-block">
            <div class="avatar">I</div>
            <div class="user-info">
                <h2>IVANKITKAT</h2>
                <p>отправил(а) вам подарок</p>
            </div>
        </div>

        <div class="gift-card">
            <div class="gift-title">Вам подарок!</div>
            <img src="https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/1313140/header.jpg" alt="Cult of the Lamb" class="game-img">
            
            <div class="game-name">Cult of the Lamb</div>
            <p class="gift-desc">
                Взращивайте собственный культ в землях лжепророков. Совершайте вылазки в таинственные регионы, создайте преданное сообщество лесных последователей и несите своё Слово, чтобы стать единственным истинным культом.
                <br><br>
                С Днем Святого Валентина! &lt;3
            </p>

            <button class="btn btn-green" id="accept-btn">Принять подарок</button>
        </div>
    </div>

    <!-- ЭКРАН 2: ТЕМНЫЙ ДИАЛОГ -->
    <div id="dark-screen">
        <div class="dialogue-line" id="line1">– Прими заявку в друзья в Стим</div>
        <div class="dialogue-line" id="line2">– Зачем</div>
        <div class="dialogue-line" id="line3">– Ну надо</div>
        <div class="dialogue-line" id="line4">– Фуууу бееее</div>
        <div class="dialogue-line" id="line5">– Ну как хочешь</div>
        
        <div class="small-text" id="small-msg">Подарка не будет. Надо было принимать мою заявку в друзья в Стиме, пока я тебе предлагал...</div>
        
        <button class="btn btn-uvy" id="uvy-btn">, , У В Ы , ,</button>
    </div>

    <!-- ЭКРАН 3: ФИНАЛ -->
    <div id="final-screen">
        <div class="final-box">
            <h2 style="color: #66c0f4; margin-bottom: 15px;">Уведомление</h2>
            <p class="final-text">
                Ну ладно, ладно. Я ведь не монстр какой-то. Жаль, что сюрприз сделать не получилось, но подарить что-нибудь я всё равно хочу, поэтому вот тебе кнопка "принять в друзья".<br><br>
                Нажмёшь на нее – и я смогу подарить тебе игру.<br><br>
                С днём святого Валентина :3
            </p>
            
            <a href="https://s.team/p/hvdr-krmr/gmccgmkv" class="btn btn-blue">ладно</a>

            <p class="disclaimer">
                Правда, теперь выдача подарка может занять больше времени из-за особенностей работы площадки и из-за того, что мне нужно будет купить и передать его вручную, а не автоматически. Но ничего страшного.
            </p>
        </div>
    </div>

    <script>
        const acceptBtn = document.getElementById('accept-btn');
        const steamScreen = document.getElementById('steam-screen');
        const darkScreen = document.getElementById('dark-screen');
        const finalScreen = document.getElementById('final-screen');
        const uvyBtn = document.getElementById('uvy-btn');

        acceptBtn.addEventListener('click', () => {
            // 1. Меняем содержимое кнопки на спиннер
            acceptBtn.innerHTML = '<div class="btn-spinner"></div>';
            acceptBtn.style.pointerEvents = 'none'; // Блокируем повторные нажатия
            
            // 2. Ждем 10 секунд, пока юзер пялится в экран
            setTimeout(() => {
                // Плавное затемнение экрана подарка
                steamScreen.style.opacity = '0';
                
                setTimeout(() => {
                    steamScreen.style.display = 'none';
                    darkScreen.style.display = 'flex';
                    // Запуск диалога
                    startDialogue();
                }, 1000); 

            }, 10000); 
        });

        function startDialogue() {
            const lines = ['line1', 'line2', 'line3', 'line4', 'line5'];
            let delay = 1000;

            lines.forEach((id) => {
                setTimeout(() => {
                    document.getElementById(id).classList.add('visible');
                }, delay);
                delay += 1500;
            });

            setTimeout(() => {
                document.getElementById('small-msg').style.opacity = '1';
            }, delay + 2000);

            setTimeout(() => {
                uvyBtn.style.opacity = '1';
            }, delay + 2000 + 4000);
        }

        uvyBtn.addEventListener('click', () => {
            darkScreen.style.display = 'none';
            finalScreen.style.display = 'flex';
        });

    </script>
</body>
</html>